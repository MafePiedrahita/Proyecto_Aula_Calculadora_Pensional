# Proyecto de Aula: Calculadora Pensional (Colombia reforma 2024)
La calculadora Pensional es una herramienta que va a permitir estimar el valor de la pensional mensual que un trabajador en Colombia recibir√° al momento de jubilarse.
Este c√°lculo se realiza de acuerdo a las reglas establecidas en la Reforma Pnesional 2024, la cual introdujo un modelo de pilares, que combina el √©gimen p√∫blico con los fondos privados.
El prop√≥sito de este proyecto es brindar a los usuarios una forma seniclla de simular una pension futura.

### Contexto general de los pilares:
R√©gimen de Prima Media (Colpensiones):
-El trabajador cotiza semanas y al cumplir la edad y requisitos minimos, recibe una pensi√≥n calculada sobre un porcentaje de su salario promedio. Lo cual depende principalmente de:
-Semanas cotizadas 
-Edad
-Salario promedio 
-Tasa de reemplazo definida por la ley
### R√©gimen de Ahorro Individual con Solidaridad (Privadas):
-El trabajador ahorra en una cuenta individual administradad por un fondo privado (Protecci√≥n, Porvenir, Colfondos)
-El monto de la pensi√≥n depende de:
 -Saldo acumulado
 -Factor de c√°lculo (relacionado con esperanza de vida, tasas de inter√©s y modalidad de pensi√≥n)
 -Edad

### Funcionalidades:
-Estima la pensi√≥n en Colpensiones 
-Estima la pensi√≥n en fondos privados  
-Permite introducir datos como salario promedio, semanas cotizadas, saldo acumulado y edad.  
-Incluye validaciones de errores para asegurar c√°lculos correctos.  
-Retorna la pensi√≥n mensual proyectada con valores redondeados. 

Entrevista a experto sobre el tema: https://soundcloud.com/mariana-henao-748870407/entrevista_calculadora_pension?si=6600a80691774424b816af3bda636c84&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing

# Gu√≠a r√°pida para ejecutar el proyecto

### Requisitos: 

- Python 3.10+. 
- Se recomienda usar entorno virtual (venv).

### 1) Preparaci√≥n del entorno (una sola vez):

### 1. Clona el repositorio y entra a la carpeta del proyecto
```
git clone <URL_DEL_REPO>
cd Proyecto_Aula_Calculadora_Pensional-main

```
### 2. (Recomendado) Crea y activa un entorno virtual
### Crear:
```
python -m venv .venv
```
### Activar

-macOS / Linux
```
source .venv/bin/activate
```
-Windows (PowerShell)
```
.\\.venv\\Scripts\\Activate.ps1
```
-Windows (CMD)
```
.\.venv\Scripts\activate.bat
```

### 2) Ejecutar las pruebas unitarias

-Abre una terminal en la carpeta ra√≠z del proyecto (donde ves src/).

-Ejecuta todas las pruebas con este comando:
```
python -m unittest discover -s src/test -p "test*.py" -v
``` 
## Ejemplos √∫tiles:

-Un archivo espec√≠fico
python -m unittest -v src.test.test

-Una clase de pruebas
python -m unittest -v src.test.test.PruebasPension

-Un m√©todo de prueba
python -m unittest -v src.test.test.PruebasPension.test_normal_1

### 3) Ejecutar la interfaz de consola:

Desde la ra√≠z del proyecto (con PYTHONPATH configurado como en 2A o con .env de 2B):
```
python -m src.view.interfaz_calculadora_pensional
```
La app te pedir√° los datos por consola y mostrar√° el resultado calculado usando las funciones de src/model/Pension_prueba.py.

Si tu sistema requiere ruta expl√≠cita, usa:

python ./view/interfaz-calculadora-pensional.py

### La estructura relevante del proyecto es:
```
src/
‚îú‚îÄ‚îÄ app.py                         
‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ pension_controller.py     
‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ conexion_db.py            
‚îÇ   ‚îî‚îÄ‚îÄ Pension_prueba.py          
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ pension_service.py         
‚îú‚îÄ‚îÄ view/
‚îÇ   ‚îú‚îÄ‚îÄ templates/                 
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ insertar.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ buscar.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ crear_tablas.html
‚îÇ   ‚îî‚îÄ‚îÄ static/                    
‚îî‚îÄ‚îÄ init_db.py                     

```

### Elaborado por: 
Mariana Heano Echeverri y Maria Fernanda Piedrahita Montoya.

---

## üß© Ejecuci√≥n de la Interfaz Gr√°fica (Kivy)

### üîß Requisitos previos

Antes de ejecutar la interfaz, aseg√∫rate de tener instalado el framework **Kivy**.

Puedes instalar Kivy desde la terminal con el siguiente comando:

```bash
pip install kivy
```

> üí° Si usas un entorno virtual (recomendado), act√≠valo antes de instalar Kivy.

---

### ‚ñ∂Ô∏è Ejecuci√≥n por consola

1. Abre una terminal o consola en la carpeta ra√≠z del proyecto.
2. Dir√≠gete al directorio donde se encuentra la interfaz src/view/gui.
3. Ejecuta el siguiente comando:

```bash
python Interfaz_calculadora_gui.py
```

Esto iniciar√° la interfaz gr√°fica de la calculadora pensional utilizando Kivy.
Una ventana se abrir√° mostrando la aplicaci√≥n con su interfaz visual completa.

---

### üíª Ejecuci√≥n del ejecutable (.exe)

Si no deseas usar la consola, tambi√©n puedes ejecutar la aplicaci√≥n desde el **ejecutable disponible en la secci√≥n de ‚ÄúReleases‚Äù del repositorio de GitHub**.

1. Ve al apartado **Releases**.
2. Descarga el archivo ejecutable (`.exe`) correspondiente a tu sistema operativo.
3. Una vez descargado, simplemente haz doble clic sobre el archivo para abrir la interfaz.

> ‚ö†Ô∏è No es necesario tener Python ni Kivy instalados para usar el ejecutable, ya que est√° empaquetado con todas las dependencias.

---

### üë®‚Äçüíª Autores de la interfaz

* **Juan Sebastian Pinilla Giraldo**
* **Pedro Hernandez**

---


# Configuraci√≥n de la base de datos 

Esta aplicaci√≥n requiere este creada una tabla llamada aportantes.

## Ejecuci√≥n como Aplicaci√≥n Web (Flask)

Esta versi√≥n permite usar la Calculadora Pensional como una aplicaci√≥n web interactiva, desarrollada con Flask bajo el patr√≥n MVC (Modelo - Vista - Controlador).

## Requisitos adicionales
 
Aseg√∫rate de tener Flask y psycopg2 instalados:

```
pip install flask psycopg2
```

## Configuraci√≥n de la base de datos

La aplicaci√≥n se conecta autom√°ticamente a una base de datos PostgreSQL.

## Crear las tablas en la base de datos

Para crear las tablas autom√°ticamente:


Aseg√∫rate de que el archivo sql/01_schema.sql existe y contiene el esquema de la tabla aportantes.


## Ejecuta la aplicaci√≥n y visita:

```
http://127.0.0.1:5000
```

## Ejecutar la aplicaci√≥n web

1. Abre la terminal en la carpeta ra√≠z del proyecto
2. Ejecuta:

```
python -m src.app
```


